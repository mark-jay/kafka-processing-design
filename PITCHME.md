### Обзор. Компоненты системы процессинга

На верхнем уровне процессинг представляет собой

- tariff service
- 2-phase-commit coordinator
- 2-phase-commit participant поддерживающий prepare и commit(далее PCparticipant)
- 2-phase-commit participant поддерживающий только commit(далее Cparticipant)

---

### Обзор. PCparticipants. Интерфейс

Каждый участник представляет собой отдельное приложение(отдельный application_id в kafka-streams), со
своей собственной моделью запроса(могут содержаться кошельки, номера банковских карт и тд), но они должны
поддерживать 3 операции:

- prepare - блокировка денег. Операция может завершиться успешно или нет
- commit - завершение транзакции. Commit всегда вызывается после успешного prepare и должно гарантировать успешное завершение
- abort - зарблокировка денег. Abort всегда вызывается после успешного prepare и должно гарантировать успешное завершение

---

### Обзор. PCparticipants. Примеры в текущей системе

- сервис mfs который делает движение денег на заданном аккаунте(одном)
- epay

---

### Обзор. Компоненты системы процессинга

Обработка платежа:

- запрос приходит на tariff service
- tariff service разбивает в удобном виде для того чтобы передать это 2-phase-commit coordinator'у

---

### Обзор. Компоненты системы процессинга
